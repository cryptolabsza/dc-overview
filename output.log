[1;33m=== AmericanColo Fleet Cleanup ===[0m
[0;36mMaster: 88.0.33.141[0m
[0;36mWorkers:       40 servers[0m

[1;33mStep 1: Cleaning master node (88.0.33.141)...[0m

  Containers to PRESERVE: registry, netbootxyz
  Containers to REMOVE: admin-grafana-1 admin-prometheus-1 admin-db-1 ipmi-monitor cadvisor my-node-exporter watchtower cryptolabs-proxy dc-overview prometheus grafana vastai-exporter runpod-exporter certbot

  Stopping monitoring containers...
ipmi-monitor
    stopped ipmi-monitor
cryptolabs-proxy
    stopped cryptolabs-proxy
dc-overview
    stopped dc-overview
prometheus
    stopped prometheus
grafana
    stopped grafana
runpod-exporter
    stopped runpod-exporter
  Stopping containers by pattern...
grafana
prometheus
ipmi-monitor
dc-overview
cryptolabs-proxy
runpod-exporter
  Removing monitoring containers...
    removed admin-grafana-1
    removed admin-prometheus-1
    removed admin-db-1
ipmi-monitor
    removed ipmi-monitor
    removed cadvisor
    removed my-node-exporter
    removed watchtower
cryptolabs-proxy
    removed cryptolabs-proxy
dc-overview
    removed dc-overview
prometheus
    removed prometheus
grafana
    removed grafana
    removed vastai-exporter
runpod-exporter
    removed runpod-exporter
    removed certbot
  Removing containers by pattern...
  Removing exporter services on master...
  Removing monitoring volumes...
ipmi-monitor-data
    removed volume ipmi-monitor-data
dc-overview-data
    removed volume dc-overview-data
fleet-auth-data
    removed volume fleet-auth-data
dc-overview_grafana-data
    removed volume dc-overview_grafana-data
dc-overview_prometheus-data
    removed volume dc-overview_prometheus-data
  Removing volumes by pattern...
  Pruning unused volumes...
Deleted Volumes:
77dca18665fc5598d621f406ab0a91ae3eef60ef617feb42f59eaacf03461302
93ab0663884ae240b1537d09af5c0834b3725e6363b89edc424b88747874b88a
51813fbd536d6984f19ac51e7d5f6f5b22b2a715197f0ee0a2ea987fa4e87121

Total reclaimed space: 0B
  Removing monitoring networks...
cryptolabs
    removed network cryptolabs
  Removing networks by pattern...
  Pruning unused networks...
  Removing monitoring images...
Untagged: ghcr.io/cryptolabsza/ipmi-monitor:dev
Untagged: ghcr.io/cryptolabsza/ipmi-monitor@sha256:238a5d7ae96f909ccdefe3be15472d58a57e5b974841c80a3fd5ab41f859d7d7
Deleted: sha256:fe844c08dff0f3166775d9a99defce6793b7cf923ced2cb6ed259a8dd456bf86
Deleted: sha256:f152462ea5200776cbab7874a6ecb2f26c37132ed35584cfd2a9c444a455f0cc
Deleted: sha256:47a7d38a562fadc5c4d27c56f8c989f3af137723c877f08b52aeace3159eddb3
Deleted: sha256:4e51bef1653fa23a6e0f093fb93bd37ee49f68bcdd473d0175549688b7531e7d
Deleted: sha256:bdf740b30e899dfa22508c584e753e20fe8f81e7a3f8caa212767a64d4a95996
Deleted: sha256:f447cad626e9f71c9de4b093f09044c78b761f9bbabcfd0aec81a16c124c16ff
Deleted: sha256:7645146dfc6cd7211b1560e1f73f43b346d6512c04d43b1307be62aceb37d3d9
    removed ghcr.io/cryptolabsza/ipmi-monitor
Untagged: ghcr.io/cryptolabsza/dc-overview:dev
Untagged: ghcr.io/cryptolabsza/dc-overview@sha256:2f7d715a8dc596c7aeac2f38d173226143511ca1b6fec1e3fe4d3a288af970a8
Deleted: sha256:df412745a06c53b55271e1257c24522447925ef1a6dfa2a455e66c26f8cef3a0
Deleted: sha256:898900a642d70046c24e4e1944b56b0de41bfc08ff3e373962eb67aab0930c5d
Deleted: sha256:effab1eb262dbef0188ab52fe60ee46e9cacb7d8dffc1ed22e5cd06976ab5ba2
Deleted: sha256:aec9efc3a4730d33a14102ac3ac347fedbfa3e8b67af22aed85bed2b67422031
Deleted: sha256:9c2742784a27bb7112d09f611119b9750f1418159201f8347b8587aa5971b11f
Deleted: sha256:277ba1e1d8e12f1bd2d77d8f91d6ff5526fa614a78ba52aa3cc6532b9d78f98f
    removed ghcr.io/cryptolabsza/dc-overview
Untagged: ghcr.io/cryptolabsza/cryptolabs-proxy:dev
Untagged: ghcr.io/cryptolabsza/cryptolabs-proxy@sha256:ceb5fcdc2e9ba3f437bce19ee54aaf8c544dc50a03202c3708e946fc7b0ce9a4
Deleted: sha256:3c052cd9f9d3bc5b54603fa9dd5d1c56db7f0ec170dc4caab5e69f251fd417fa
Deleted: sha256:c3261be58ae4b80cb15901b54e64886a11f6f66264b06cb209b43b1951052c02
Deleted: sha256:09159b91f1362271fb8a9570036e04b672c465bd36b6ec76a7fe3949fa54a7bd
Deleted: sha256:0c0425a9866ec91d2c76e555a1f4e54960eb9049dd1187a629e19a0b1ad3cb87
Deleted: sha256:6911fec07d4b64a44d259a36573b0f98d57b09e1a82e82f1efe0e68f4913f7d6
Deleted: sha256:4edf0d07ad1e8bd5e945b7d91d716cfc7209f27811053e35014e36a72e58096e
Deleted: sha256:b0ffd108edfe9a93d37d1947ef301cbc0fe5c1897525efd04500738921c7c5c6
Deleted: sha256:2503d4d03ba9d8a5b22d312b72a91d8a546ef0c1140717e31a7327dbd1e991f0
Deleted: sha256:1ea5316ceb098c0b2dbcc6cedb84de6cad2db506e5d7dd4bed1e613df41894f0
Deleted: sha256:aee8fd0712c35d763033e962d6392fa75c80e939d0dbe41712bf0eec5700a7e1
Deleted: sha256:809600203eca88d24994016eb965fd436dece7776bf588f047429944322a025b
Deleted: sha256:f3a23bc2b9f134db5c7127ed475ad3c9dd8f0719cdc002944059e18cf8618d10
Deleted: sha256:ebe1b7ac8c860ce51c852bd1333ac2bb49ef54a2af57517ef1684202d05d1df3
Deleted: sha256:bad170219b4234284a18bfb6ad8998d70a818f09c133c95d8bfeefc38c1a02cb
Deleted: sha256:5b4d37fb62dbae255ea62b228ea0142a53fba05b85920e59ccc3c2ed69547fc2
Deleted: sha256:9f6e34003138c117804f71e85e6b1d359a9548e90d2ab4a75f9b486377be4025
Deleted: sha256:9fda47bb4cf4ff5f643f7e9d4de82f2b138a3078ba5b79c1fbc1f0b8ae05da95
Deleted: sha256:0785b5259ff0275515cdb109e663502f5e323ef1f669af71ad3112cd24d8cf48
Deleted: sha256:4c6d79669e7c8af6a1034cba0975ac1e13a390faed682069204603fa5175746d
Deleted: sha256:989e799e634906e94dc9a5ee2ee26fc92ad260522990f26e707861a5f52bf64e
    removed ghcr.io/cryptolabsza/cryptolabs-proxy
    removed ghcr.io/cryptolabsza/vastai-exporter
Untagged: ghcr.io/cryptolabsza/runpod-exporter:latest
Untagged: ghcr.io/cryptolabsza/runpod-exporter@sha256:6adbc3cdd1b60b9ea872ba45ef73e10d7fbd35761421d12d54370c64b0b88138
Deleted: sha256:6e76ce332eaef4b62e575f2a787b5dec5b542abbf5810a1f196d0f502289395b
Deleted: sha256:63eaf7588fb92e06805f9d9097b0914ab1af3cbeb3b0c506ab141fc6314065aa
Deleted: sha256:3876814f916649efc5701d08b1336fb760695d2262bfec47ac82c54892c46cbd
Deleted: sha256:1c6cf4f936cf100b33a148493068e9fc1d706e8d094322f188f0614feb36dee8
Deleted: sha256:4848620b4f05c1bab648b71b2db717c7d2b96fdf4d91bf68b1b701f1f486155d
Deleted: sha256:aaa0749783d8f0c89f0e3c84610c7e8a3c0d4aaeb0ff4f51eba5ea85a7db3d78
Deleted: sha256:de6edbcec1fcef89176db9f9e8105fb0869502e288508ed4255e8269cdf65841
Deleted: sha256:e50a58335e1366e2581fe61794c1651afe2fe04e881e795aa166f24f4fc78d92
    removed ghcr.io/cryptolabsza/runpod-exporter
Untagged: prom/prometheus:latest
Untagged: prom/prometheus@sha256:1f0f50f06acaceb0f5670d2c8a658a599affe7b0d8e78b898c1035653849a702
Deleted: sha256:937690d77350877cc773f574d6150bc9d1fbcb1a2e23a5ae9c1553d5d29465a5
Deleted: sha256:5f7c8ce5d4797988cc2d1959987818471ea3cdbe77a8dcd5bf1ccd551d5fb9ae
Deleted: sha256:908c8e708ad1307871da43cb6f446bf408930d266e67ed3c1b36e11c71d4cb93
Deleted: sha256:c408bc4ee9a6654a9c0f9f2ab397768a22a0b9d418f30bbc907a5224a22d1f37
Deleted: sha256:bd9d4664f112398405a3a3238e3d7863c19b7f5f8064e716018c6f10655e30ea
Deleted: sha256:483c144aa7782eb69425d482cd8217c346340babd4fb71277ee1f17c204eed42
Deleted: sha256:0892b290aa843b01800b385c6ead85efc466268bfa47b4fc5add291502b350b5
Deleted: sha256:d8ff67723e8a48ed7d2b9a09cb1b39f64a8d217dd703b548a431dca9889b4fbc
Deleted: sha256:01b3605fd94917e5fdcd29218be367917241aea1193f7f4a16cc66de4b51f545
Deleted: sha256:84206608dd77b849a42c68c579ecf082a485eea1bbdec40618c779c373c27b7b
Deleted: sha256:b92437a87bb9fdba549cccb225042bb05b8789d69defffc21554e626c60f99d8
    removed prom/prometheus
Untagged: grafana/grafana:latest
Untagged: grafana/grafana@sha256:ba93c9d192e58b23e064c7f501d453426ccf4a85065bf25b705ab1e98602bfb1
Deleted: sha256:aa786575ad9455f06cde03137668886e642e3a6a012326c2f0cc8ea249502873
Deleted: sha256:45773a06086e9b2b5621cb30e825fe797de7675e6ef12408bc30d57388bfd66f
Deleted: sha256:ffdea98865093e02b574a56bf3ced9dcc809c3dd5e0ab4936de603ee25573ad7
Deleted: sha256:74e06adb4b162afdff0bd6589096b4f8e4209ad8231c7ed516413577b03a95f2
Deleted: sha256:a806d655c5ee55951ef51c7be93af5ea7d053a902e9c7db171c1b313133c3e0e
Deleted: sha256:dbb3dbc89faf6fce179c1df1af1f1c0cfa1d7281f2d62f3e3b3b423a0dec218f
Deleted: sha256:f957ecc92cf1e0d009855458675b6253f41580c8d6aa6489c9ac74a03b80b645
Deleted: sha256:cd9b46ff132dda6a8595f733367599744c25bfcf999d5db2139e1cf9a70f51a2
Deleted: sha256:eda7ea93fed060001d6d617d88ece34152664defd5c86a76ad2ad94000033077
Deleted: sha256:f9fbc7b1154b6af929585163a70cb6acdf90e2ba42ced4a6dfdf273e679dbede
Deleted: sha256:5aa68bbbc67e405a7cfa11466b02f1c9597add532909fb9a4d0f6f58a30b044e
    removed grafana/grafana
  Pruning dangling images...
Total reclaimed space: 0B
[0;32m  âœ“ Master node cleaned[0m

  Remaining containers on master:
NAMES        STATUS
netbootxyz   Up 2 days (healthy)
registry     Up 4 weeks

[1;33mStep 2: Cleaning exporter services on workers...[0m
[0;36m  Note: Docker containers on workers are NOT affected[0m
[0;36m  Running cleanup in parallel (max 64 concurrent)...[0m

  Results:
    brickbox-01 (88.0.1.1): [0;32mâœ“ cleaned[0m
    brickbox-02 (88.0.2.1): [0;32mâœ“ cleaned[0m
    brickbox-03 (88.0.3.1): [0;32mâœ“ cleaned[0m
    brickbox-04 (88.0.4.1): [0;32mâœ“ cleaned[0m
    brickbox-05 (88.0.5.1): [0;32mâœ“ cleaned[0m
    brickbox-06 (88.0.6.1): [0;32mâœ“ cleaned[0m
    brickbox-07 (88.0.7.1): [0;32mâœ“ cleaned[0m
    brickbox-08 (88.0.8.1): [0;32mâœ“ cleaned[0m
    brickbox-09 (88.0.9.1): [0;32mâœ“ cleaned[0m
    brickbox-10 (88.0.10.1): [0;32mâœ“ cleaned[0m
    brickbox-11 (88.0.11.1): [0;32mâœ“ cleaned[0m
    88.0.12.1: [0;31mUNREACHABLE[0m
    brickbox-25 (88.0.25.1): [0;32mâœ“ cleaned[0m
    brickbox-26 (88.0.26.1): [0;32mâœ“ cleaned[0m
    brickbox-27 (88.0.27.1): [0;32mâœ“ cleaned[0m
    brickbox-28 (88.0.28.1): [0;32mâœ“ cleaned[0m
    brickbox-29 (88.0.29.1): [0;32mâœ“ cleaned[0m
    brickbox-30 (88.0.30.1): [0;32mâœ“ cleaned[0m
    brickbox-31 (88.0.31.1): [0;32mâœ“ cleaned[0m
    brickbox-32 (88.0.32.1): [0;32mâœ“ cleaned[0m
    brickbox-33 (88.0.33.1): [0;32mâœ“ cleaned[0m
    brickbox-34 (88.0.34.1): [0;32mâœ“ cleaned[0m
    brickbox-35 (88.0.35.1): [0;32mâœ“ cleaned[0m
    brickbox-36 (88.0.36.1): [0;32mâœ“ cleaned[0m
    brickbox-37 (88.0.37.1): [0;32mâœ“ cleaned[0m
    brickbox-38 (88.0.38.1): [0;32mâœ“ cleaned[0m
    brickbox-39 (88.0.39.1): [0;32mâœ“ cleaned[0m
    brickbox-40 (88.0.40.1): [0;32mâœ“ cleaned[0m
    brickbox-41 (88.0.41.1): [0;32mâœ“ cleaned[0m
    brickbox-42 (88.0.42.1): [0;32mâœ“ cleaned[0m
    brickbox-43 (88.0.43.1): [0;32mâœ“ cleaned[0m
    brickbox-44 (88.0.44.1): [0;32mâœ“ cleaned[0m
    brickbox-45 (88.0.45.1): [0;32mâœ“ cleaned[0m
    brickbox-46 (88.0.46.1): [0;32mâœ“ cleaned[0m
    brickbox-47 (88.0.47.1): [0;32mâœ“ cleaned[0m
    brickbox-48 (88.0.48.1): [0;32mâœ“ cleaned[0m
    runpodccc96 (88.0.96.1): [0;32mâœ“ cleaned[0m
    runpodccc97 (88.0.97.1): [0;32mâœ“ cleaned[0m
    RunpodCCC98 (88.0.98.1): [0;32mâœ“ cleaned[0m
    RunpodCCC99 (88.0.99.1): [0;32mâœ“ cleaned[0m

  [0;32mâœ“ 39 workers cleaned[0m, [0;31m1 failed[0m

[1;33mStep 3: Verification...[0m

  Master containers (should see registry, netbootxyz only):
NAMES        IMAGE                           STATUS
netbootxyz   ghcr.io/netbootxyz/netbootxyz   Up 2 days (healthy)
registry     registry:2                      Up 4 weeks

  Sample worker check (88.0.1.1):
    Exporter services:
    (none running)

[0;32m=== Cleanup Complete ===[0m

Summary:
  â€¢ Master: Removed monitoring containers, volumes, and images
  â€¢ Preserved: registry, netbootxyz, pxe containers and images
  â€¢ Workers: Removed exporter systemd services, Docker containers untouched
  â€¢ No reboots performed
  â€¢ Next deploy will pull fresh monitoring images

To redeploy dc-overview:
  ssh root@88.0.33.141 -i ~/.ssh/ubuntu_key
  pip install --force-reinstall git+https://github.com/cryptolabsza/dc-overview.git@dev --break-system-packages
  dc-overview quickstart -c /root/dc-overview-config.yaml -y
